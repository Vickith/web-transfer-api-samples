<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Download &middot; Signiant Developer
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Signiant Developer
        </a>
      </h1>
      <p class="lead">The Signiant Developer Website</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
      
        
          
            <a class="sidebar-nav-item active" href="/tapi/v2/download">Download</a>
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/mediashuttle/v1.1/portal">Media Shuttle Portal</a>
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/tapi/v2/transfer">Transfer</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/tapi/v2/upload">Upload</a>
          
        
      

      <span class="sidebar-nav-item">Currently v2.5.2</span>
    </nav>

    <p>&copy; 2016. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="page">
  <h1 class="page-title">Download</h1>
  <h2 id="signiantmstdownload">Signiant.Mst.Download</h2>
<p>This class extends Signiant.Mst.Transfer.</p>

<p>This object allows the programmer to perform an accelerated download using the Transfer API. The Signiant.Mst.Download object exposes functions to accomplish things such as picking the destination folder for downloaded files/folders, setting the authentication credentials for the destination server, etc.</p>

<p>One Signiant.Mst.Download object must be created per download.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">//create a new download Object</span>
<span class="kd">var</span> <span class="nx">download</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Signiant</span><span class="p">.</span><span class="nx">Mst</span><span class="p">.</span><span class="nx">Download</span><span class="p">();</span>
<span class="c1">//set the download server</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">setServer</span><span class="p">(</span><span class="s1">'global-am.cloud.signiant.com'</span><span class="p">);</span> <span class="c1">//see https://flight.support.signiant.com/customer/en/portal/articles/2173685 for Amazon or Azure servers</span>
<span class="c1">//set the apikey for downloading</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">setApiKey</span><span class="p">(</span><span class="s1">'YOUR_API_KEY'</span><span class="p">);</span> <span class="c1">//get an API key from http://info.signiant.com/flight-Free-Trial_1.html</span>
<span class="c1">//set the storage configuration</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">setStorageConfig</span><span class="p">(</span><span class="s1">'{"access-key":"'</span><span class="o">+</span><span class="nx">amazonS3Key</span><span class="o">+</span><span class="s1">'", "secret-key":"'</span><span class="o">+</span><span class="nx">amazonS3Secret</span><span class="o">+</span><span class="s1">'", "bucket":"'</span><span class="o">+</span><span class="nx">amazonS3Bucket</span><span class="o">+</span><span class="s1">'"}'</span><span class="p">);</span>
<span class="c1">//set the probeLB (probe load balancer) to true (always true for Flight).</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">setProbeLB</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="c1">//set the files to download to the file that is passed</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">setFilesToDownload</span><span class="p">(</span><span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">fileName</span><span class="p">));</span> <span class="c1">//fileName would be something like directory1/directory2/file.ext</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">subscribeForTransferErrors</span><span class="p">(</span><span class="nx">transferErrors</span><span class="p">);</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">subscribeForBasicEvents</span><span class="p">(</span><span class="nx">transferEvents</span><span class="p">);</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">subscribeForTransferProgress</span><span class="p">(</span><span class="nx">transferProgressCallback</span><span class="p">);</span>

<span class="c1">//open the file picker so the user selects where to save the file.</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">chooseDownloadFolder</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="nx">folder</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//set the download folder to what they set</span>
  <span class="nx">download</span><span class="p">.</span><span class="nx">setDownloadFolder</span><span class="p">(</span><span class="nx">folder</span><span class="p">);</span>
  <span class="c1">//double check that we actually set the files by calling getFiles on the download object instead of using the fileName that as passed</span>
  <span class="nx">selectedFiles</span> <span class="o">=</span> <span class="nx">download</span><span class="p">.</span><span class="nx">getFiles</span><span class="p">();</span> 
  <span class="k">if</span> <span class="p">(</span><span class="nx">selectedFiles</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">"No files Selected for Download"</span><span class="p">);</span>
  <span class="k">else</span><span class="p">{</span>
    <span class="c1">//do the download</span>
    <span class="nx">download</span><span class="p">.</span><span class="nx">startDownload</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<h1 id="methods">Methods</h1>

<h2 id="clearfiles">clearFiles</h2>
<p>This will clear the files/folders specified in the filesArray parameter, from the list of files to be uploaded. The files/folders must be specified using their full paths in the filesArray parameter. An exception is thrown if the filesArray parameter is undefined or datatype of filesArray is not an Array.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">download</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Signiant</span><span class="p">.</span><span class="nx">Mst</span><span class="p">.</span><span class="nx">Download</span><span class="p">();</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">clearFiles</span><span class="p">(</span><span class="nx">filesArray</span><span class="p">);</span>
</code></pre>
</div>

<h2 id="clearallfiles">clearAllFiles</h2>
<p>Clears all the files from the list of files to be uploaded.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">download</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Signiant</span><span class="p">.</span><span class="nx">Mst</span><span class="p">.</span><span class="nx">Download</span><span class="p">();</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">clearAllFiles</span> 
</code></pre>
</div>

<h2 id="getfilescollisionhandlingmode">getFilesCollisionHandlingMode</h2>
<p>Returns the value of the configuration property that determines how file-name collisions are handled for downloaded content. The following values can be returned: version and overwrite.</p>

<h2 id="getfilepathhandlingmode">getFilePathHandlingMode</h2>
<p>Returns the value of the configuration property that determines the folder-structure that is recreated for downloaded content. The following values can be returned: FLAT, PATH and FULL.</p>

<h2 id="setdownloadfolder">setDownloadFolder</h2>
<p>Sets the value of the configuration property that determines where the downloaded content will go.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">download</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Signiant</span><span class="p">.</span><span class="nx">Mst</span><span class="p">.</span><span class="nx">Download</span><span class="p">();</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">setDownloadFolder</span><span class="p">(</span><span class="s2">"/home/user"</span><span class="p">)</span>
</code></pre>
</div>

<h2 id="setfilecollisionhandlingmode">setFileCollisionHandlingMode</h2>
<p>Sets the value of the configuration property that determines how file-name collisions are handled for downloaded content. Valid values for mode are: version and overwrite.</p>

<p>The mode value behavior is:</p>

<ul>
  <li>version: If the name of a file/folder being downloaded collides with a file/folder that already exists in the destination directory, then a version suffix is appended to the name of the file/folder being downloaded.</li>
  <li>overwrite: If the name of a file/folder being downloaded collides with a file/folder that already exists in the destination directory, then the pre-existing file/folder is overwritten with the file/folder being downloaded.
An exception is thrown if mode is undefined, empty or invalid.</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">download</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Signiant</span><span class="p">.</span><span class="nx">Mst</span><span class="p">.</span><span class="nx">Download</span><span class="p">();</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">setFileCollisionHandlingMode</span><span class="p">(</span><span class="s1">'version'</span><span class="p">)</span>
</code></pre>
</div>

<h2 id="setfilepathhandlingmode">setFilePathHandlingMode</h2>
<p>Sets the value of the configuration property that determines the folder-structure that is recreated for downloaded content. Valid values for mode are: FLAT, PATH and FULL. An exception is thrown if mode is undefined, empty or invalid.</p>

<p>The mode value behavior is:</p>

<ul>
  <li>FLAT: All downloaded content goes directly into the directory specified in the invocation of the setDownloadFolder method. See setFileCollisionHandlingMode for more information on using file-name collision handling with FLAT file-path handling mode.</li>
  <li>PATH: All downloaded content goes into the directory specified in the invocation of the setDownloadFolder method, but the relative path of the content is duplicated, as it exists in the content repository on the source server.</li>
  <li>FULL: All downloaded content goes into the directory specified in the invocation of the setDownloadFolder method, but the full path of the content is duplicated, as it exists in the content repository on the source server.</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">download</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Signiant</span><span class="p">.</span><span class="nx">Mst</span><span class="p">.</span><span class="nx">Download</span><span class="p">();</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">setFilePathHandlingMode</span><span class="p">(</span><span class="s1">'FLAT'</span><span class="p">)</span>
</code></pre>
</div>

<h2 id="setfilestodownload">setFilesToDownload</h2>
<p>This function allows you to specify the files/folders to be downloaded. The files/folders must be specified using the full path in the filePathArray parameter, and must exist on the source server from where they are being downloaded.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">download</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Signiant</span><span class="p">.</span><span class="nx">Mst</span><span class="p">.</span><span class="nx">Download</span><span class="p">();</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">setFilesToDownload</span><span class="p">(</span><span class="nx">ArrayOfFiles</span><span class="p">)</span>
</code></pre>
</div>

<h2 id="startdownload">startDownload</h2>
<p>Starts the download of the specified files/folders from the source server to the user’s destination directory. If the specified API key is not valid, or if the Signiant App is not installed, an exception is thrown. This function simply notifies the Media Shuttle Transfer Plug-in to begin the transfer, and then returns. Further notifications related to the state/progress of the transfer can be retrieved by registering event listeners with the subscribeForBasicEvents and subscribeForTransferProgress functions.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">download</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Signiant</span><span class="p">.</span><span class="nx">Mst</span><span class="p">.</span><span class="nx">Download</span><span class="p">();</span>
<span class="nx">download</span><span class="p">.</span><span class="nx">chooseDownloadFolder</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="nx">folder</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//set the download folder to what they set</span>
  <span class="nx">download</span><span class="p">.</span><span class="nx">setDownloadFolder</span><span class="p">(</span><span class="nx">folder</span><span class="p">);</span>
  <span class="c1">//double check that we actually set the files by calling getFiles on the download object instead of using the fileName that as passed</span>
  <span class="nx">selectedFiles</span> <span class="o">=</span> <span class="nx">download</span><span class="p">.</span><span class="nx">getFiles</span><span class="p">();</span> 
  <span class="k">if</span> <span class="p">(</span><span class="nx">selectedFiles</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s2">"No files Selected for Download"</span><span class="p">);</span>
    <span class="k">else</span><span class="p">{</span>
      <span class="c1">//do the download</span>
      <span class="nx">download</span><span class="p">.</span><span class="nx">startDownload</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

</div>

    </div>

  </body>
</html>
